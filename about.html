<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link href="https://fonts.googleapis.com/css2?family=Architects+Daughter&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="about.css">
    <!-- Remainder of head will be generated dynamically -->
</head>
<body>
    <header>
        <h1 class="main-title"><a href="index.html" class="main-title-link">GABE KURFMAN</a></h1>
        <nav class="nav-breadcrumb">
            <a href="index.html">Home</a>/<span> About</span>
        </nav>
    </header>

    <div class="loading" id="loading">Loading about page...</div>

    <div class="about-container" id="aboutContent" style="display: none;">
        <!-- Hero Section -->
        <div class="hero-section">
            <div class="portrait-container">
                <img id="portraitPhoto" class="portrait-photo" src="" alt="Portrait photo">
            </div>
            <div class="hero-info">
                <div class="contact-info">
                    <h3>Contact</h3>
                    <div id="contactInfo"></div>
                </div>
                <div class="hero-education">
                    <h3>Education</h3>
                    <div id="educationContent"></div>
                </div>
            </div>
        </div>

        <!-- Experience Section -->
        <div class="resume-section">
            <h2 class="section-title">Experience</h2>
            <div id="experienceContent"></div>
        </div>

        <!-- Proficiencies Section -->
        <div class="resume-section">
            <h2 class="section-title">Proficiencies</h2>
            <div class="proficiencies-grid" id="proficienciesContent"></div>
        </div>

        <!-- Extracurriculars Section -->
        <div class="resume-section">
            <h2 class="section-title">Extracurriculars</h2>
            <div id="extracurricularsContent"></div>
        </div>

        <!-- Certifications & Honors Section -->
        <div class="resume-section">
            <h2 class="section-title">Certifications & Honors</h2>
            <div class="certifications-grid" id="certificationsContent"></div>
        </div>

        <!-- Downloads Section -->
        <div class="resume-section">
            <div class="downloads-grid" id="downloadsContent"></div>
        </div>
    </div>

    <div id="footer-container"></div>

    <script src="utils.js"></script>
    <script src="template.js"></script>
    <script src="0-resume-data.js"></script>
    <script>
        // Function to render personal info and hero section
        function renderHeroSection(data) {
            const personalInfo = data.personalInfo;

            document.getElementById('portraitPhoto').src = personalInfo.photo;
            document.getElementById('portraitPhoto').alt = `Portrait of ${personalInfo.name}`;

            const contactInfo = document.getElementById('contactInfo');
            contactInfo.innerHTML = `
                <div class="contact-item"><strong>Email:</strong> <a href="mailto:${personalInfo.email}">${personalInfo.email}</a></div>
                <div class="contact-item"><strong>LinkedIn:</strong> <a href="https://${personalInfo.linkedin}" target="_blank">${personalInfo.linkedin}</a></div>
            `;
        }

        // Consolidated render function for education, experience, and extracurriculars
        function renderHistorySection(data) {
            return data.map(item => `
        <div class="history-item">
            <div class="history-header">
                ${item.logo ? `<img class="history-logo" src="${item.logo}" alt="${item.organization} logo" onerror="this.style.display='none'">` : ''}
                <div class="history-info">
                    <div class="history-name">${item.organization}</div>
                    <div class="history-location">${item.location}</div>
                </div>
            </div>
            ${item.positions.map(position => `
                <div class="history-position">
                    <div class="history-position-header">
                        <div class="history-position-title">${position.title}</div>
                        <div class="history-position-duration">${position.duration}</div>
                    </div>
                    <ul class="history-details-list">
                        ${position.responsibilities.map(resp => `<li>${resp}</li>`).join('')}
                    </ul>
                </div>
            `).join('')}
        </div>
    `).join('');
        }

        // Updated individual section render functions
        function renderEducation(education) {
            const container = document.getElementById('educationContent');
            container.innerHTML = renderHistorySection(education);
        }

        function renderExperience(experience) {
            const container = document.getElementById('experienceContent');
            container.innerHTML = renderHistorySection(experience);
        }

        function renderExtracurriculars(extracurriculars) {
            const container = document.getElementById('extracurricularsContent');
            container.innerHTML = renderHistorySection(extracurriculars);
        }

        // Function to render proficiencies section
        function renderProficiencies(proficiencies) {
            const container = document.getElementById('proficienciesContent');

            const proficienciesHTML = Object.entries(proficiencies).map(([category, data]) => `
        <div class="proficiency-category">
            <div class="proficiency-content">
                <div class="proficiency-title">${category}</div>
                <ul class="skills-list">
                    ${data.skills.map(skill => `<li>${skill}</li>`).join('')}
                </ul>
            </div>
            ${data.icon ? `<img class="proficiency-icon" src="${data.icon}" alt="${category} icon" onerror="this.style.display='none'">` : ''}
        </div>
    `).join('');

            container.innerHTML = proficienciesHTML;
        }

        // Function to render certifications section
        function renderCertifications(certifications) {
            const container = document.getElementById('certificationsContent');

            const certificationsHTML = certifications.map(cert => `
        <div class="certification-item">
            <div class="certification-name">${cert.name}</div>
            <div class="certification-date">${cert.date}</div>
        </div>
    `).join('');

            container.innerHTML = certificationsHTML;
        }

        // Function to render downloads section
        function renderDownloads(downloads) {
            const container = document.getElementById('downloadsContent');

            const downloadsHTML = downloads.map(download => `
        <a href="${download.url}" class="download-item" target="_blank">
            <div class="download-link">${download.name}</div>
            <div class="download-description">${download.description}</div>
        </a>
    `).join('');

            container.innerHTML = downloadsHTML;
        }

        // Initialize the about page
        async function initializeAboutPage() {
            try {
                // Hide loading and show content
                document.getElementById('loading').style.display = 'none';
                document.getElementById('aboutContent').style.display = 'block';

                // Render all sections
                renderHeroSection(resumeData);
                renderEducation(resumeData.education);
                renderExperience(resumeData.experience);
                renderExtracurriculars(resumeData.extracurriculars);
                renderProficiencies(resumeData.proficiencies);
                renderCertifications(resumeData.certifications);
                renderDownloads(resumeData.downloads);

            } catch (error) {
                console.error('Error loading about page:', error);
                document.getElementById('loading').textContent = `Error: ${error.message}`;
            }
        }

        // Initialize the page
        initializeAboutPage();
    </script>
</body>

</html>